$(document).ready(function () {
    initCheckboxStyle();
    var t = {
        tooltip: function () {
            var t = $('[data-toggle="tooltip"]');
            t.length && t.tooltip()
        }, textToggle: function () {
            $(".custom-toggle").on("click", function () {
                var t = $(this).hasClass("active"), e = $(".toggle-text");
                t ? ($(this).removeClass("active"), e.text("Open"), $(this).next().addClass("hidden")) : ($(this).addClass("active"), e.text("Close"), $(this).next().removeClass("hidden"))
            })
        }, fixedHeader: function () {
            $(window).scroll(function () {
                var t = $(window).scrollTop();
                t >= 100 ? $(".header").addClass("fixed") : $(".header").removeClass("fixed")
            })
        }, testimonialsSlider: function () {
            $(".slider-start").owlCarousel({
                loop: !1,
                nav: !1,
                margin: 115,
                mouseDrag: !1,
                responsiveClass: !0,
                responsive: {0: {items: 1}, 600: {items: 2}, 1e3: {items: 3}}
            })
        }, wowEffects: function () {
            (new WOW).init()
        }, scrollTo: function () {
            $(".scroll-down").click(function () {
                return $("html, body").animate({scrollTop: $($(this).attr("href")).offset().top}, 800), !1
            })
        }, mobileMenu: function () {
            var t = function (t, e, i) {
                $(t).on("click", function () {
                    $(this).parents(e).toggleClass(i)
                })
            };
            t(".menu-toggle", ".header", "open"), t(".sub-menu-toggle", "li", "open")
        }, init: function () {
            this.tooltip(), this.scrollTo(), this.mobileMenu(), this.textToggle(), this.wowEffects(), this.fixedHeader(), this.testimonialsSlider()
        }
    };
    t.init()
});

$(document).on("click", ".menu-toggle, .menu-overlay", function () {
    var e = $(".header"),
        t = $(".menu-overlay");
    if ($(this).is(".menu-toggle-open") && !$(".menu-overlay").length) return e.addClass("open"),
        void e.prepend('<div class="menu-overlay">');
    e.removeClass("open"), t.remove()
});

function initCheckboxStyle() {
    $('.checkbox-switcher').each(function () {
        var $this = $(this);

        var id = $this.attr('id');
        if (!id) {
            id = 'uid_' + (Date.now().toString(36) + Math.random().toString(20).substr(2, 5));
            $this.attr('id', id);
        }

        $this.wrap('<span class="checkbox-switcher-wrapper no-select">');
        $this.after('<label for="' + id + '" class="right-text switcher-text no-select">' + $this.data('right-text') + '</label>');
        $this.after('<label for="' + id + '" class="switcher-oval no-select">');
        $this.after('<label for="' + id + '" class="left-text switcher-text no-select">' + $this.data('left-text') + '</label>');
    });


    $('.checkbox-switcher-wrapper .switcher-text').each(function () {
        $(this).css('width', $(this).width());
    });
}

$(document).ready(function () {

    var windowHeight = window.innerHeight;

    $('.background-image').each(function () {
        $(this).data('offsetTop', $(this).offset().top);
    });

    $('.background-image').each(function () {

        var img = $(this);

        function parallaxImg() {

            var speed = img.data('speed');

            var imgTop = img.data('offsetTop');
            if (!imgTop) {
                imgTop = img.offset().top;
            }

            var windowScrollTop = $(this).scrollTop();

            if (!speed) {
                speed = 0;
            }

            var translateY = speed * 15 * (imgTop + img.height() / 12 - windowScrollTop) / windowHeight;

            if ($(img).is('.oval-3')) {
                console.log(windowHeight, imgTop, windowScrollTop, translateY, imgTop, img.height() / 12, windowScrollTop);
            }
            if (imgTop + img.height() + 50 > windowScrollTop + windowHeight) {
                return;
            }
            img.css({
                transform: 'translateY(' + translateY + '%)'
            });
        }

        $(document).on({
            scroll: function () {
                parallaxImg();
            }, ready: function () {
                parallaxImg();
            }, resize: function () {
                parallaxImg();
            }
        });
    });
});


$(document).on('change', '#annual-monthly-input', function () {
    if ($(this).is(':checked')) {
        $('.price').addClass('annually');
    } else {
        $('.price').removeClass('annually');
    }
})


var fixOwlGaps = function () {
    // console.log(this, this._items, this.$stage.width())
    // console.log($(window).innerWidth())

    $(this._items).each(function (id) {
        $(this).addClass('owl-item-' + id);
    });

    if ($(window).innerWidth() < 700) {
        return;
    }
    var $stage = this.$stage,
        stageWidth = $stage.parent().width(),
        itemWidth = (stageWidth - 1) / 3;

    var slider = this;
    slider._widths = [];
    var coordinates = 0;

    $(this._items).each(function (id) {

        var owlItem = $(this),
            item = $(this).children();

        if (item.length) {
            owlItem.css('width', itemWidth);
            slider._widths[id] = itemWidth;
            slider._coordinates[id] = -(coordinates += itemWidth);
        }
    });

    $stage.css('transform', 'translate3d(' + 1 + 'px, 0px, 0px)');
}

function setItemClass() {
    if (this.$stage)
        this.$stage.removeClass('active-item-0 active-item-1 active-item-2').addClass('active-item-' + this._current);
}

var initPricingSlider = function () {

    $(".pricing-slider-wrapper .owl-carousel").owlCarousel({
        onInitialized: fixOwlGaps,
        onRefreshed: fixOwlGaps,
        onChanged: setItemClass,
        loop: !1,
        autoWidth: false,
        autoHeightClass: 0,
        autoWidthClass: 0,
        spacing: 0,
        center: true,
        margin: 0,
        startPosition: 1,
        navText: [
            '<img class="left-arrow rotate-180" alt="Left" src="/images/pages/pricing/arrow.svg">',
            '<img class="right-arrow" alt="Right" src="/images/pages/pricing/arrow.svg">'
        ],

        mouseDrag: 1,
        responsiveClass: 0,
        responsive: {

            0: {
                stagePadding: 45,
                items: 1,
                mouseDrag: 1,
                nav: 1,
            },
            700: {
                items: 3,
                mouseDrag: 0,
                nav: !1,
                stagePadding: 0,
            }
        }
    });
};

$(document).ready(function () {
    initPricingSlider();
});

$(window).resize(function () {
    $(".owl-carousel").trigger('refresh.owl.carousel');
});









